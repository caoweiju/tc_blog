---
title: 快应用的开发体验
date: 2019-11-20 18:00:44
tags:
- 快应用
categories: 
- tool
---

## 快应用
[快应用官网介绍](https://www.quickapp.cn/)：快应用是一种新的应用形态，以往的手机端应用主要有两种方式：网页、原生应用；网页无需安装，却体验不是很好；原生应用体验流畅，却需要从应用商店下载安装，难以一步直达用户；快应用的出现，就是希望能够让用户无需下载安装，并且还能流畅的体验应用内容。

为了达到上面的目标，快应用建立一种新的语言开发规范，同时提供一系列的开发套件辅助支持。简单来说，开发者主要利用前端知识与技能，以及对应的IDE，手机设备就可以做原型的开发。快应用使用前端技术栈开发，原生渲染，同时具备H5与原生应用的双重优点，开发者使用的前端技术栈资料多，学习成本低。

2018年3月份，由小米，OPPO，VIVO，华为等10家国内主流厂商成立了快应用联盟，从技术规范层面做了统一，并保证了开发者开发的快应用可以直接在所有的联盟内厂商的手机设备上运行。

快应用框架深度集成进各手机厂商的手机操作系统中，可以在操作系统层面形成用户需求与应用服务的无缝连接，很多只用在原生应用中才能使用的功能，在快应用中可以很方便的实现，享受原生应用体验，同时不用担心分发留存等问题，资源消耗也比较少。

对于每台手机设备，应用可以从多个系统入口，引用用户体验产品。比如：全局搜索、负一屏、浏览器搜索等。


## 快应用开发
开发者参与快应用开发，主要分为以下几个步骤:
- 快应用官网注册
- 完善资料
- 绑定厂商开发者账号(至少一家)

<!-- more -->

完成以上三部，快应用开发者就可以提交快应用，快应用具有以下特点：
- 快应用采用前端技术栈，运行可开发效率高，学习成本低，代码可复用
- 快应用开发需要基本基础的前端知识，如 标签， 样式， js脚本
- 快应用使用 MVVM的设计模式进行开发，开发者无需直接操作DOM节点的增删，利用数据驱动的方式完成节点更新。
- 当前标准的开发规范与Vue的开发方式相近，后期可能开放并接入其它的DSL开发方式，以符合开发者的开发习惯。

### 环境搭建
[快应用的环境和工程搭建参考](https://doc.quickapp.cn/tutorial/overview/use-command.html)；

本地环境要求：
- NodeJS 8.0以上（建议10.0+）

工程结构初始化步骤：
1. 全局安装快应用编译工具：`npm install -g hap-toolkit`；可以使用查看`hap -v`版本
2. 创建工程模板：`hap init <ProjectName>`；会以工程名新建文件夹，并初始化快应用项目模板结构
3. 将初始化工程推送至远程仓库：`git remote add origin <远程git项目地址>`

本地开发环境搭建：
1. 安装官方IDE：https://www.quickapp.cn/docCenter/post/97
2. 通过快应用IDE打开初始化后的快应用工程，可以预览初始化工程的简单效果；

### 基础开发
1. 进入工程根目录下，并安装模板需要依赖：`npm i`;
2. 编译项目： `npm run build`；（如果希望每次修改源代码文件后，都自动编译项目可以使用：`npm run watch`）
    - 编译打包成功后，项目根目录下会生成文件夹：build、dist
    - build：临时产出，包含编译后的页面 js，图片等
    - dist：最终产出，包含 rpk 文件。其实是将 build 目录下的资源打包压缩为一个文件，后缀名为rpk，这个rpk文件就是项目编译后的最终产出
3. [更多快应用开发内容参考快应用官网](https://doc.quickapp.cn/)
4. [通过项目结构解析来了解快应用的基本框架和](https://doc.quickapp.cn/tutorial/overview/project-structure.html)
5. 通过快应用的组件来构建页面，通过接口来调用一些native的功能；


### 本地调试
通过IDE我们可以简单的模拟本地调试，IDE的左下侧有四个图标，有一个眼睛👁的图标可以用来预览当前工程的效果；预览框左下角有一个开关可以打开预览页的 dev tools来查看一些内容；

注意：
- 模拟器很多native功能并没有实现，所以在调用native的定位 设备信息等功能时会存在问题；
- 模拟器中的生命周期的实现也存在部分缺陷，不能完全按照正确的周期来执行；
- 部分样式可能在预览界面好真机上存在表现差异；

### 真机调试
真机调试【真机调试工具apk、快应用预览版apk】
- (资源下载)[https://www.quickapp.cn/docCenter/post/69]，分别下载并安装快应用调试器和快应用预览版，安装时同意相关授权
- 打开快应用调试器，通过usb链接直接更新调试
- 也可以通过扫码的方式来安装本地包，二维码可以通过点击IDE的预览界面正上方的一个二维码图形按钮来生成，需要保持真机和开发机在同一局域网中；
- 为了查看真机中的dev tools，可以点击修改后打开快应用调试器界面下发的立即调试，会在PC上打开一个dev tools界面，修改代码后，真机上的内容会自定更新；

### 打包和发布相关


## 开发注意事项
1. 目前快应用是使用[6.4版本V8引擎](https://v8.dev/blog/v8-release-64)来运行JavaScript，快应用的script中不可以运行标准JavaScript外的一些内容；
